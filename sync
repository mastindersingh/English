apiVersion: apps/v1
kind: Deployment
metadata:
  name: {{ include "elastic-agent-helm.fullname" . }}
  labels:
    {{- include "elastic-agent-helm.labels" . | nindent 4 }}
spec:
  replicas: {{ .Values.replicaCount }}
  selector:
    matchLabels:
      {{- include "elastic-agent-helm.selectorLabels" . | nindent 6 }}
  template:
    metadata:
      labels:
        {{- include "elastic-agent-helm.selectorLabels" . | nindent 8 }}
    spec:
      containers:
        - name: {{ .Chart.Name }}
          image: "{{ .Values.image.repository }}:{{ .Values.image.tag }}"
          imagePullPolicy: {{ .Values.image.pullPolicy }}
          env:
            {{- toYaml .Values.env | nindent 12 }}


replicaCount: 1



I am currently working on deploying Helm for the Elastic Agent or a heartbeat.yml configuration on our Kubernetes cluster and would appreciate your assistance in this process. This deployment is somewhat similar to the one we executed earlier, but we are looking to explore if we can achieve different or improved results with this approach.

What We Need:
Deployment of Helm for Elastic Agent: We need to set up and configure Helm for the Elastic Agent on our Kubernetes cluster. The Elastic Agent will help us efficiently collect data from various sources and subsequently send it to Elasticsearch.

Deployment of heartbeat.yml for Kubernetes: Alternatively, we are also considering deploying a heartbeat.yml configuration to monitor the uptime of our services and endpoints. This deployment will help us keep track of the availability and response times of our services.

Why We Need Your Help:
While I have some experience with these deployments, your expertise and insights would be invaluable in ensuring a smooth and effective deployment process. Your knowledge would help us avoid potential pitfalls and ensure that the deployment is optimized for our specific use case and environment.

Next Steps:
Could you please allocate some time to discuss this further? I believe your guidance will be crucial in successfully deploying and configuring Helm for Elastic Agent or the heartbeat.yml on Kubernetes. Please let me know your availability, and we can schedule a meeting or a call at your earliest convenience.

Looking forward to your positive response.

Best regards,


image:
  repository: docker.elastic.co/beats/elastic-agent-complete
  tag: 8.10.2
  pullPolicy: IfNotPresent

env:
  - name: FLEET_ENROLL
    value: "1"
  - name: FLEET_URL
    value: "{fleet-server-host-url}"
  - name: FLEET_ENROLLMENT_TOKEN
    value: "{enrollment-token}"
